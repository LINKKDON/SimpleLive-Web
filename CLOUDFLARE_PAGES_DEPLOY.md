# Cloudflare Pages éƒ¨ç½²æŒ‡å—ï¼ˆæ‹–æ‹½ä¸Šä¼ æ–¹å¼ï¼‰

## ğŸ“¦ å‡†å¤‡å·¥ä½œ

ç”±äºæ‚¨ä½¿ç”¨çš„æ˜¯"å¯¼å…¥æ–‡ä»¶å¤¹"ï¼ˆæ‹–æ‹½ä¸Šä¼ ï¼‰çš„æ–¹å¼éƒ¨ç½²ï¼Œéœ€è¦ç¡®ä¿æ–‡ä»¶ç»“æ„æ­£ç¡®ã€‚

## ğŸ“ éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ç»“æ„

**é‡è¦ï¼šåªä¸Šä¼  `public` æ–‡ä»¶å¤¹å†…çš„å†…å®¹ï¼Œä¸æ˜¯æ•´ä¸ª `simple-live-web` æ–‡ä»¶å¤¹ï¼**

æ­£ç¡®çš„ç»“æ„åº”è¯¥æ˜¯ï¼š

```
ä¸Šä¼ çš„æ ¹ç›®å½•/
â”œâ”€â”€ index.html              â† å¿…é¡»åœ¨æ ¹ç›®å½•
â”œâ”€â”€ player.html
â”œâ”€â”€ _routes.json            â† è·¯ç”±é…ç½®ï¼ˆé‡è¦ï¼‰
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ danmaku.css
â””â”€â”€ js/
    â”œâ”€â”€ main.js
    â”œâ”€â”€ player.js
    â”œâ”€â”€ danmaku.js
    â””â”€â”€ sites/
        â””â”€â”€ bilibili.js
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šé€šè¿‡ Cloudflare Dashboard æ‹–æ‹½ä¸Šä¼ 

#### 1. å‡†å¤‡ä¸Šä¼ æ–‡ä»¶

**Windows ç”¨æˆ·**ï¼š
```bash
# æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨
# è¿›å…¥é¡¹ç›®ç›®å½•ï¼šd:\Soft\Projects\1\simple-live-web\
# æ‰“å¼€ public æ–‡ä»¶å¤¹
# é€‰ä¸­ public æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆä¸æ˜¯ public æ–‡ä»¶å¤¹æœ¬èº«ï¼‰
```

**éœ€è¦é€‰ä¸­çš„å†…å®¹**ï¼š
- index.html
- player.html
- _routes.json
- css æ–‡ä»¶å¤¹
- js æ–‡ä»¶å¤¹

#### 2. ç™»å½• Cloudflare

1. è®¿é—® https://dash.cloudflare.com/
2. ç™»å½•ä½ çš„è´¦å·

#### 3. åˆ›å»º Pages é¡¹ç›®

1. ç‚¹å‡»å·¦ä¾§èœå• **Workers & Pages**
2. ç‚¹å‡» **Create application**
3. é€‰æ‹© **Pages** æ ‡ç­¾
4. ç‚¹å‡» **Upload assets**ï¼ˆä¸Šä¼ èµ„æºï¼‰

#### 4. ä¸Šä¼ æ–‡ä»¶

1. è¾“å…¥é¡¹ç›®åç§°ï¼ˆå¦‚ï¼š`simple-live`ï¼‰
2. å°† `public` æ–‡ä»¶å¤¹å†…çš„**æ‰€æœ‰å†…å®¹**æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸ
3. æˆ–ç‚¹å‡»ä¸Šä¼ æŒ‰é’®é€‰æ‹©æ–‡ä»¶

**æ³¨æ„**ï¼šç¡®ä¿ä¸Šä¼ å `index.html` åœ¨æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯åœ¨ `public/index.html`

#### 5. éƒ¨ç½²

1. ç‚¹å‡» **Deploy site**
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰
3. è·å¾—ä½ çš„ç½‘ç«™åœ°å€ï¼š`https://simple-live.pages.dev`

### æ–¹æ³•äºŒï¼šé€šè¿‡ Wrangler CLIï¼ˆæ¨èï¼‰

```bash
# 1. å®‰è£… Wrangler
npm install -g wrangler

# 2. ç™»å½• Cloudflare
wrangler login

# 3. è¿›å…¥é¡¹ç›®ç›®å½•
cd d:\Soft\Projects\1\simple-live-web

# 4. å‘å¸ƒåˆ° Pages
wrangler pages deploy public --project-name=simple-live

# 5. è®¿é—®ç”Ÿæˆçš„ URL
```

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: 404 æ‰¾ä¸åˆ°ç½‘é¡µ

**åŸå› **ï¼šæ–‡ä»¶ç»“æ„ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š

1. **æ£€æŸ¥æ ¹ç›®å½•**
   - ç¡®ä¿ `index.html` åœ¨æ ¹ç›®å½•
   - ä¸åº”è¯¥æ˜¯ `public/index.html`

2. **é‡æ–°éƒ¨ç½²**
   - åˆ é™¤å½“å‰éƒ¨ç½²
   - åªä¸Šä¼  `public` æ–‡ä»¶å¤¹**å†…**çš„å†…å®¹

### é—®é¢˜ 2: API è°ƒç”¨å¤±è´¥ï¼ˆCORS é”™è¯¯ï¼‰

**åŸå› **ï¼šWorkers Functions æœªæ­£ç¡®éƒ¨ç½²

**è§£å†³æ–¹æ³•**ï¼š

æ–¹æ³•ä¸€ä¸æ”¯æŒ Workers Functionsï¼Œéœ€è¦ä½¿ç”¨æ–¹æ³•äºŒï¼ˆWrangler CLIï¼‰æˆ–è¿æ¥ Git ä»“åº“ã€‚

### é—®é¢˜ 3: CSS/JS æ–‡ä»¶ 404

**åŸå› **ï¼šè·¯å¾„é—®é¢˜

**æ£€æŸ¥**ï¼š
```
ç½‘ç«™æ ¹ç›®å½•/
â”œâ”€â”€ index.html          âœ“ å­˜åœ¨
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css      âœ“ å­˜åœ¨
â””â”€â”€ js/
    â””â”€â”€ main.js        âœ“ å­˜åœ¨
```

## ğŸ”§ ä½¿ç”¨ Git éƒ¨ç½²ï¼ˆæ¨èï¼Œæ”¯æŒ APIï¼‰

å¦‚æœéœ€è¦ API åŠŸèƒ½ï¼ˆè·å–ç›´æ’­é—´ä¿¡æ¯ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ Git æ–¹å¼éƒ¨ç½²ï¼š

### 1. æ¨é€åˆ° GitHub

```bash
cd d:\Soft\Projects\1\simple-live-web

# åˆå§‹åŒ– Git
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit: Simple Live Web"

# è¿æ¥åˆ° GitHub ä»“åº“ï¼ˆå…ˆåœ¨ GitHub åˆ›å»ºç©ºä»“åº“ï¼‰
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/simple-live-web.git

# æ¨é€
git branch -M main
git push -u origin main
```

### 2. åœ¨ Cloudflare è¿æ¥ä»“åº“

1. è¿›å…¥ **Workers & Pages**
2. ç‚¹å‡» **Create application**
3. é€‰æ‹© **Pages** â†’ **Connect to Git**
4. é€‰æ‹©ä½ çš„ GitHub ä»“åº“
5. æ„å»ºé…ç½®ï¼š
   ```
   Framework preset: None
   Build command: (ç•™ç©º)
   Build output directory: public
   Root directory: /
   ```
6. ç‚¹å‡» **Save and Deploy**

### 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

- è‡ªåŠ¨æ„å»ºï¼ˆçº¦ 1-2 åˆ†é’Ÿï¼‰
- è·å¾—ç½‘ç«™åœ°å€
- API åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## âœ… éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä½ çš„ç½‘ç«™ï¼š

### 1. æµ‹è¯•é¦–é¡µ
```
https://ä½ çš„é¡¹ç›®.pages.dev/
```
åº”è¯¥çœ‹åˆ° Simple Live é¦–é¡µ

### 2. æµ‹è¯•æ’­æ”¾å™¨
```
https://ä½ çš„é¡¹ç›®.pages.dev/player.html?platform=bilibili&room=545068
```
åº”è¯¥èƒ½æ­£å¸¸æ’­æ”¾ç›´æ’­

### 3. æµ‹è¯• APIï¼ˆä»… Git éƒ¨ç½²ï¼‰
```
https://ä½ çš„é¡¹ç›®.pages.dev/api/bilibili/room?room_id=545068
```
åº”è¯¥è¿”å› JSON æ•°æ®

## ğŸ“Š å¯¹æ¯”ï¼šæ‹–æ‹½ä¸Šä¼  vs Git éƒ¨ç½²

| åŠŸèƒ½ | æ‹–æ‹½ä¸Šä¼  | Git éƒ¨ç½² |
|------|---------|---------|
| é™æ€é¡µé¢ | âœ… | âœ… |
| CSS/JS | âœ… | âœ… |
| Workers API | âŒ | âœ… |
| å¼¹å¹•åŠŸèƒ½ | âœ… | âœ… |
| è‡ªåŠ¨éƒ¨ç½² | âŒ | âœ… |
| ç‰ˆæœ¬æ§åˆ¶ | âŒ | âœ… |

**ç»“è®º**ï¼š
- å¿«é€Ÿé¢„è§ˆï¼šä½¿ç”¨æ‹–æ‹½ä¸Šä¼ 
- å®Œæ•´åŠŸèƒ½ï¼šä½¿ç”¨ Git éƒ¨ç½²

## ğŸ¯ æ¨èéƒ¨ç½²æµç¨‹

### å¦‚æœåªæ˜¯æµ‹è¯•é¡µé¢å¸ƒå±€
â†’ ä½¿ç”¨æ‹–æ‹½ä¸Šä¼  `public` æ–‡ä»¶å¤¹å†…å®¹

### å¦‚æœéœ€è¦å®Œæ•´åŠŸèƒ½ï¼ˆåŒ…æ‹¬ APIï¼‰
â†’ ä½¿ç”¨ Git éƒ¨ç½²æ•´ä¸ªé¡¹ç›®

## ğŸ’¡ å¿«é€Ÿä¿®å¤æŒ‡å—

å¦‚æœç°åœ¨å·²ç»éƒ¨ç½²ä½†æ˜¾ç¤º 404ï¼š

### æ­¥éª¤ 1ï¼šæ£€æŸ¥æ–‡ä»¶ç»“æ„

åœ¨ Cloudflare Dashboard ä¸­ï¼š
1. è¿›å…¥ä½ çš„ Pages é¡¹ç›®
2. æŸ¥çœ‹ **Deployments** â†’ æœ€æ–°éƒ¨ç½²
3. ç‚¹å‡» **View build log**
4. æ£€æŸ¥ **Assets** éƒ¨åˆ†ï¼Œç¡®ä¿ `index.html` åœ¨æ ¹ç›®å½•

### æ­¥éª¤ 2ï¼šé‡æ–°ä¸Šä¼ 

å¦‚æœç»“æ„é”™è¯¯ï¼š
1. åˆ é™¤å½“å‰éƒ¨ç½²ï¼ˆæˆ–åˆ›å»ºæ–°éƒ¨ç½²ï¼‰
2. åªé€‰æ‹© `simple-live-web/public/` æ–‡ä»¶å¤¹å†…çš„å†…å®¹
3. ç¡®ä¿ä¸è¦ä¸Šä¼  `public` æ–‡ä»¶å¤¹æœ¬èº«

### æ­¥éª¤ 3ï¼šç­‰å¾…ç”Ÿæ•ˆ

- Cloudflare éœ€è¦ 1-2 åˆ†é’ŸåŒæ­¥
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- ä½¿ç”¨éšç§æ¨¡å¼è®¿é—®

## ğŸ“ è¿˜æ˜¯ä¸è¡Œï¼Ÿ

å¦‚æœæŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ä»ç„¶æ˜¾ç¤º 404ï¼Œè¯·æä¾›ï¼š

1. Cloudflare Pages é¡¹ç›®åç§°
2. éƒ¨ç½²æ–¹å¼ï¼ˆæ‹–æ‹½ or Gitï¼‰
3. æ˜¯å¦èƒ½è®¿é—® CSS æ–‡ä»¶ï¼ˆå¦‚ `/css/style.css`ï¼‰
4. æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

---

**å»ºè®®**ï¼šä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒå’Œå®Œæ•´åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨ **Git éƒ¨ç½²æ–¹å¼**ï¼