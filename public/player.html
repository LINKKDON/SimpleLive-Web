<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êí≠ÊîæÂô® - Simple Live</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/danmaku.css">
</head>
<body class="player-page">
    <div class="player-container">
        <!-- È°∂ÈÉ®ÂØºËà™ -->
        <div class="player-header">
            <a href="/" class="back-btn">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
            <h2 id="roomTitle">Âä†ËΩΩ‰∏≠...</h2>
        </div>

        <!-- ËßÜÈ¢ëÊí≠ÊîæÂô® -->
        <div class="video-wrapper" id="videoWrapper">
            <video id="videoPlayer" class="video-player" controls autoplay muted></video>
            
            <!-- ÂºπÂπïÂ±Ç -->
            <div id="danmakuLayer"></div>
            
            <!-- ÂºπÂπïÁªüËÆ° -->
            <div class="danmaku-stats" id="danmakuStats">
                <div class="stat-item">
                    <span class="stat-icon">üî•</span>
                    <span id="popularityCount">-</span>
                </div>
            </div>
            
            <div id="playerLoading" class="player-loading">
                <div class="loading-spinner"></div>
                <p>Ê≠£Âú®Âä†ËΩΩÁõ¥Êí≠ÊµÅ...</p>
            </div>
            <div id="playerError" class="player-error" style="display: none;">
                <p class="error-text"></p>
                <button class="retry-btn" onclick="retryPlay()">ÈáçËØï</button>
            </div>
            
            <!-- ÂºπÂπïÊéßÂà∂ÊåâÈíÆ -->
            <div class="video-controls">
                <button id="toggleDanmaku" class="control-btn" title="ÂºπÂπïÂºÄÂÖ≥">
                    üí¨ ÂºπÂπï
                </button>
                <button id="danmakuSettings" class="control-btn" title="ÂºπÂπïËÆæÁΩÆ">
                    ‚öôÔ∏è ËÆæÁΩÆ
                </button>
            </div>
        </div>

        <!-- Áõ¥Êí≠Èó¥‰ø°ÊÅØ -->
        <div class="room-info">
            <div class="streamer-info">
                <img id="streamerAvatar" class="streamer-avatar" src="" alt="">
                <div class="streamer-details">
                    <h3 id="streamerName">‰∏ªÊí≠ÂêçÁß∞</h3>
                    <p id="roomIntro" class="room-intro">Áõ¥Êí≠Èó¥ÁÆÄ‰ªã</p>
                </div>
            </div>
            <div class="room-stats">
                <span class="stat-item">
                    <span class="stat-icon">üë•</span>
                    <span id="onlineCount">-</span> ‰∫∫Ê∞î
                </span>
                <span class="stat-item">
                    <span class="stat-icon">üé¨</span>
                    <span id="roomStatus">Áõ¥Êí≠‰∏≠</span>
                </span>
            </div>
        </div>

        <!-- Ê∏ÖÊô∞Â∫¶ÈÄâÊã© -->
        <div class="quality-selector" id="qualitySelector" style="display: none;">
            <h3>Ê∏ÖÊô∞Â∫¶</h3>
            <div id="qualityButtons" class="quality-buttons"></div>
        </div>
    </div>

    <!-- ÂºπÂπïËÆæÁΩÆÂºπÁ™ó -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="danmaku-settings">
                <h3>ÂºπÂπïËÆæÁΩÆ</h3>
                
                <div class="setting-item">
                    <label class="switch-container">
                        <span>ÊòæÁ§∫ÂºπÂπï</span>
                        <label class="switch">
                            <input type="checkbox" id="enableDanmaku" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                </div>
                
                <div class="setting-item">
                    <label>
                        ‰∏çÈÄèÊòéÂ∫¶
                        <span class="value-display" id="opacityValue">80%</span>
                    </label>
                    <input type="range" id="danmakuOpacity" min="0" max="100" value="80">
                </div>
                
                <div class="setting-item">
                    <label>
                        Â≠ó‰ΩìÂ§ßÂ∞è
                        <span class="value-display" id="fontSizeValue">24px</span>
                    </label>
                    <input type="range" id="danmakuFontSize" min="16" max="36" value="24">
                </div>
                
                <div class="setting-item">
                    <label>
                        ÂºπÂπïÈÄüÂ∫¶
                        <span class="value-display" id="speedValue">8Áßí</span>
                    </label>
                    <input type="range" id="danmakuSpeed" min="4" max="12" value="8">
                </div>
                
                <div class="setting-item">
                    <label>
                        ÊòæÁ§∫Âå∫Âüü
                        <span class="value-display" id="areaValue">100%</span>
                    </label>
                    <input type="range" id="danmakuArea" min="25" max="100" value="100">
                </div>
                
                <button class="close-modal-btn" onclick="closeSettingsModal()">ÂÖ≥Èó≠</button>
            </div>
        </div>
    </div>

    <!-- ÂºïÂÖ• flv.js -->
    <!-- ÂºïÂÖ•Á¨¨‰∏âÊñπÂ∫ì -->
    <script src="https://cdn.jsdelivr.net/npm/flv.js@1.6.2/dist/flv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/hy-barrage@1.0.1/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/protobufjs@7.2.5/dist/protobuf.min.js"></script>

    <!-- ÂºïÂÖ•Á´ôÁÇπËÑöÊú¨ -->
    <script src="/js/sites/bilibili.js"></script>
    <script src="/js/sites/douyu.js"></script>
    <script src="/js/sites/huya.js"></script>
    <script src="/js/sites/douyin.js"></script>

    <!-- ÂºïÂÖ•Ê†∏ÂøÉÈÄªËæë -->
    <script src="/js/danmaku.js"></script>
    <script src="/js/player.js"></script>
</body>
</html>